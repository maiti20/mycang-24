#!/usr/bin/env python3
# -*- coding: utf-8 -*-
"""
独立数据库初始化脚本 - 不依赖Flask
使用纯Python和SQLite创建完整的数据库结构和初始数据
"""

import sqlite3
import hashlib
import sys
from datetime import datetime

# 设置输出编码为UTF-8
if sys.platform == 'win32':
    import io
    sys.stdout = io.TextIOWrapper(sys.stdout.buffer, encoding='utf-8')

def hash_password(password):
    """密码哈希函数"""
    return hashlib.sha256(password.encode()).hexdigest()

def init_database():
    """初始化数据库"""
    print("[数据库] 开始初始化数据库...")
    
    # 连接数据库
    conn = sqlite3.connect('fitness.db')
    cursor = conn.cursor()
    
    # 创建用户表
    print("[数据库] 创建用户表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS user (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            username VARCHAR(80) UNIQUE NOT NULL,
            email VARCHAR(120) UNIQUE NOT NULL,
            password_hash VARCHAR(255) NOT NULL,
            age INTEGER,
            gender VARCHAR(10),
            height REAL,
            weight REAL,
            fitness_goal TEXT,
            avatar TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')

    # 创建食物表
    print("[数据库] 创建食物表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS food (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name VARCHAR(100) NOT NULL,
            category VARCHAR(50) NOT NULL,
            calories_per_unit REAL NOT NULL,
            protein REAL DEFAULT 0,
            carbs REAL DEFAULT 0,
            fat REAL DEFAULT 0,
            fiber REAL DEFAULT 0,
            sugar REAL DEFAULT 0,
            sodium REAL DEFAULT 0,
            unit VARCHAR(20) DEFAULT '份',
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')

    # 创建饮食记录表
    print("[数据库] 创建饮食记录表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS diet_record (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            food_id INTEGER NOT NULL,
            quantity REAL NOT NULL,
            meal_type VARCHAR(20) NOT NULL,
            record_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            notes TEXT,
            FOREIGN KEY (user_id) REFERENCES user (id),
            FOREIGN KEY (food_id) REFERENCES food (id)
        )
    ''')

    # 创建运动表
    print("[数据库] 创建运动表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS exercise (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            name VARCHAR(100) NOT NULL,
            category VARCHAR(50) NOT NULL,
            description TEXT,
            difficulty_level VARCHAR(20) DEFAULT '中等',
            calories_per_minute REAL DEFAULT 5,
            muscle_groups TEXT,
            equipment_needed TEXT,
            tutorial_url TEXT,
            image_url TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
        )
    ''')

    # 创建运动记录表
    print("[数据库] 创建运动记录表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS exercise_log (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            exercise_id INTEGER NOT NULL,
            duration_minutes INTEGER NOT NULL,
            intensity_level VARCHAR(20) DEFAULT '中等',
            log_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            notes TEXT,
            calories_burned REAL,
            FOREIGN KEY (user_id) REFERENCES user (id),
            FOREIGN KEY (exercise_id) REFERENCES exercise (id)
        )
    ''')

    # 创建AI健身方案表
    print("[数据库] 创建AI健身方案表...")
    cursor.execute('''
        CREATE TABLE IF NOT EXISTS ai_plan (
            id INTEGER PRIMARY KEY AUTOINCREMENT,
            user_id INTEGER NOT NULL,
            plan_name VARCHAR(100) NOT NULL,
            plan_type VARCHAR(50) NOT NULL,
            goals TEXT NOT NULL,
            recommendations TEXT NOT NULL,
            schedule_info TEXT,
            nutrition_advice TEXT,
            created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
            expires_at TIMESTAMP,
            is_active BOOLEAN DEFAULT TRUE,
            FOREIGN KEY (user_id) REFERENCES user (id)
        )
    ''')
    
    # 插入初始食物数据
    print("[数据] 插入食物数据...")
    foods = [
        # ==================== 主食类 (25项) ====================
        ("米饭", "主食", 116, 2.6, 25.9, 0.3, 0.4, 0.1, 5, "100g"),
        ("糙米饭", "主食", 111, 2.6, 23.0, 0.9, 1.8, 0.4, 5, "100g"),
        ("小米粥", "主食", 46, 1.4, 8.4, 0.7, 0.4, 0.0, 2, "100g"),
        ("面条", "主食", 137, 4.4, 27.5, 0.7, 1.8, 0.6, 28, "100g"),
        ("全麦面包", "主食", 247, 13.2, 41.0, 3.4, 6.8, 5.0, 491, "100g"),
        ("白面包", "主食", 265, 9.0, 49.0, 3.2, 2.7, 5.0, 491, "100g"),
        ("燕麦", "主食", 389, 16.9, 66.3, 6.9, 10.6, 0.6, 249, "100g"),
        ("馒头", "主食", 223, 7.0, 47.0, 1.1, 1.3, 1.0, 300, "100g"),
        ("花卷", "主食", 211, 6.5, 44.0, 1.3, 1.0, 1.5, 280, "100g"),
        ("包子(素)", "主食", 200, 6.0, 38.0, 3.0, 1.5, 2.0, 350, "100g"),
        ("饺子(猪肉)", "主食", 240, 8.5, 30.0, 9.0, 1.2, 1.0, 450, "100g"),
        ("油条", "主食", 386, 6.9, 51.0, 17.6, 0.9, 0.5, 580, "100g"),
        ("煎饼", "主食", 235, 5.0, 40.0, 6.0, 1.5, 2.0, 400, "100g"),
        ("玉米", "主食", 112, 4.1, 22.7, 1.4, 2.4, 6.3, 35, "100g"),
        ("红薯", "主食", 86, 1.6, 20.1, 0.1, 3.0, 4.2, 55, "100g"),
        ("紫薯", "主食", 82, 1.3, 18.5, 0.2, 2.8, 3.0, 45, "100g"),
        ("土豆", "主食", 77, 2.0, 17.5, 0.1, 2.2, 0.8, 6, "100g"),
        ("芋头", "主食", 79, 2.2, 17.1, 0.2, 2.1, 0.7, 14, "100g"),
        ("山药", "主食", 57, 1.9, 12.4, 0.2, 1.0, 0.5, 18, "100g"),
        ("粽子", "主食", 195, 4.2, 38.0, 2.5, 1.0, 3.0, 320, "100g"),
        ("年糕", "主食", 154, 3.3, 33.3, 0.6, 0.8, 1.0, 200, "100g"),
        ("汤圆", "主食", 238, 4.0, 42.0, 6.0, 0.5, 12.0, 180, "100g"),
        ("烧饼", "主食", 260, 6.8, 48.0, 5.0, 1.5, 2.0, 500, "100g"),
        ("意大利面", "主食", 131, 5.0, 25.0, 1.1, 1.8, 0.6, 6, "100g"),
        ("藜麦", "主食", 368, 14.1, 64.2, 6.1, 7.0, 0.0, 5, "100g"),

        # ==================== 蛋白质类 - 肉类 (25项) ====================
        ("鸡胸肉", "蛋白质", 165, 31.0, 0.0, 3.6, 0.0, 0.0, 74, "100g"),
        ("鸡腿肉", "蛋白质", 209, 26.0, 0.0, 11.0, 0.0, 0.0, 90, "100g"),
        ("鸡翅", "蛋白质", 222, 21.0, 0.0, 15.0, 0.0, 0.0, 82, "100g"),
        ("牛肉", "蛋白质", 250, 26.0, 0.0, 15.0, 0.0, 0.0, 60, "100g"),
        ("牛里脊", "蛋白质", 155, 28.0, 0.0, 4.0, 0.0, 0.0, 54, "100g"),
        ("牛腩", "蛋白质", 332, 20.0, 0.0, 28.0, 0.0, 0.0, 65, "100g"),
        ("猪瘦肉", "蛋白质", 143, 20.3, 1.5, 6.2, 0.0, 0.0, 57, "100g"),
        ("猪排骨", "蛋白质", 264, 18.3, 0.0, 20.4, 0.0, 0.0, 48, "100g"),
        ("猪肝", "蛋白质", 129, 19.3, 5.0, 3.5, 0.0, 0.0, 68, "100g"),
        ("羊肉", "蛋白质", 203, 19.0, 0.0, 14.1, 0.0, 0.0, 72, "100g"),
        ("鸭肉", "蛋白质", 240, 15.5, 0.0, 19.7, 0.0, 0.0, 69, "100g"),
        ("鹅肉", "蛋白质", 251, 17.9, 0.0, 19.9, 0.0, 0.0, 74, "100g"),
        ("兔肉", "蛋白质", 102, 21.0, 0.0, 2.0, 0.0, 0.0, 45, "100g"),
        ("火腿", "蛋白质", 145, 19.0, 1.5, 7.0, 0.0, 0.5, 1200, "100g"),
        ("培根", "蛋白质", 417, 12.0, 1.4, 40.0, 0.0, 0.0, 1500, "100g"),
        ("香肠", "蛋白质", 320, 13.0, 2.5, 28.5, 0.0, 1.0, 980, "100g"),
        ("午餐肉", "蛋白质", 230, 13.0, 3.0, 18.5, 0.0, 1.0, 1100, "100g"),
        ("牛肉干", "蛋白质", 550, 45.6, 11.3, 36.4, 0.0, 3.0, 2100, "100g"),
        ("猪肉脯", "蛋白质", 435, 38.0, 22.0, 22.0, 0.0, 15.0, 1800, "100g"),
        ("鸡蛋", "蛋白质", 155, 13.0, 1.1, 11.0, 0.0, 1.1, 124, "100g"),
        ("鸭蛋", "蛋白质", 180, 12.6, 3.1, 13.0, 0.0, 1.0, 122, "100g"),
        ("鹌鹑蛋", "蛋白质", 160, 12.8, 0.4, 11.1, 0.0, 0.0, 132, "100g"),
        ("皮蛋", "蛋白质", 171, 14.2, 4.5, 10.7, 0.0, 0.0, 542, "100g"),
        ("咸鸭蛋", "蛋白质", 190, 12.7, 2.0, 14.7, 0.0, 0.0, 2700, "100g"),
        ("茶叶蛋", "蛋白质", 144, 12.8, 1.5, 9.5, 0.0, 0.5, 350, "1个"),

        # ==================== 蛋白质类 - 海鲜 (20项) ====================
        ("三文鱼", "蛋白质", 208, 20.0, 0.0, 13.0, 0.0, 0.0, 59, "100g"),
        ("金枪鱼", "蛋白质", 144, 23.0, 0.0, 5.0, 0.0, 0.0, 39, "100g"),
        ("鲈鱼", "蛋白质", 97, 18.6, 0.0, 2.0, 0.0, 0.0, 78, "100g"),
        ("鲫鱼", "蛋白质", 108, 17.1, 0.0, 4.1, 0.0, 0.0, 68, "100g"),
        ("草鱼", "蛋白质", 113, 17.4, 0.0, 4.3, 0.0, 0.0, 53, "100g"),
        ("带鱼", "蛋白质", 127, 18.1, 0.0, 5.3, 0.0, 0.0, 150, "100g"),
        ("鳕鱼", "蛋白质", 82, 18.0, 0.0, 0.7, 0.0, 0.0, 54, "100g"),
        ("黄鱼", "蛋白质", 99, 17.9, 0.0, 2.5, 0.0, 0.0, 103, "100g"),
        ("虾", "蛋白质", 99, 20.1, 0.0, 1.5, 0.0, 0.0, 165, "100g"),
        ("基围虾", "蛋白质", 101, 18.6, 2.8, 1.4, 0.0, 0.0, 302, "100g"),
        ("龙虾", "蛋白质", 91, 19.0, 0.0, 0.9, 0.0, 0.0, 423, "100g"),
        ("螃蟹", "蛋白质", 95, 14.0, 2.3, 3.3, 0.0, 0.0, 260, "100g"),
        ("蛤蜊", "蛋白质", 74, 10.5, 3.5, 1.2, 0.0, 0.0, 520, "100g"),
        ("扇贝", "蛋白质", 88, 15.0, 3.4, 0.8, 0.0, 0.0, 392, "100g"),
        ("生蚝", "蛋白质", 81, 9.0, 4.9, 2.3, 0.0, 0.0, 106, "100g"),
        ("鱿鱼", "蛋白质", 92, 17.4, 0.8, 1.8, 0.0, 0.0, 110, "100g"),
        ("章鱼", "蛋白质", 82, 15.0, 2.2, 1.0, 0.0, 0.0, 230, "100g"),
        ("海参", "蛋白质", 55, 12.0, 0.9, 0.3, 0.0, 0.0, 480, "100g"),
        ("海带", "蛋白质", 12, 1.2, 2.1, 0.1, 0.5, 0.5, 160, "100g"),
        ("紫菜", "蛋白质", 207, 26.7, 44.1, 1.1, 21.6, 0.0, 710, "100g"),

        # ==================== 蛋白质类 - 豆制品 (12项) ====================
        ("豆腐", "蛋白质", 76, 8.1, 1.9, 4.8, 0.4, 0.3, 7, "100g"),
        ("嫩豆腐", "蛋白质", 62, 6.2, 2.0, 3.5, 0.3, 0.5, 4, "100g"),
        ("老豆腐", "蛋白质", 98, 11.2, 1.5, 5.8, 0.6, 0.2, 8, "100g"),
        ("豆腐干", "蛋白质", 140, 16.2, 4.9, 7.4, 0.9, 0.3, 280, "100g"),
        ("豆腐皮", "蛋白质", 409, 44.6, 18.8, 17.4, 0.2, 0.0, 10, "100g"),
        ("腐竹", "蛋白质", 461, 44.6, 22.3, 21.7, 1.0, 0.0, 26, "100g"),
        ("豆浆", "蛋白质", 33, 3.0, 1.1, 1.6, 1.1, 0.0, 3, "100ml"),
        ("毛豆", "蛋白质", 131, 13.0, 8.5, 5.0, 5.2, 3.0, 15, "100g"),
        ("黄豆", "蛋白质", 390, 35.0, 34.2, 16.0, 15.5, 7.3, 2, "100g"),
        ("黑豆", "蛋白质", 381, 36.0, 33.6, 15.9, 10.2, 0.0, 3, "100g"),
        ("红豆", "蛋白质", 324, 20.2, 60.7, 0.6, 7.7, 3.2, 2, "100g"),
        ("绿豆", "蛋白质", 329, 21.6, 62.0, 0.8, 6.4, 0.0, 3, "100g"),

        # ==================== 蔬菜类 (35项) ====================
        ("西兰花", "蔬菜", 34, 2.8, 7.0, 0.4, 2.6, 1.5, 33, "100g"),
        ("菠菜", "蔬菜", 23, 2.9, 3.6, 0.4, 2.2, 0.4, 79, "100g"),
        ("胡萝卜", "蔬菜", 41, 0.9, 10.0, 0.2, 2.8, 4.7, 69, "100g"),
        ("番茄", "蔬菜", 18, 0.9, 3.9, 0.2, 1.2, 2.6, 5, "100g"),
        ("黄瓜", "蔬菜", 16, 0.7, 3.6, 0.1, 0.5, 1.7, 2, "100g"),
        ("生菜", "蔬菜", 15, 1.3, 2.9, 0.2, 1.3, 0.8, 28, "100g"),
        ("白菜", "蔬菜", 13, 1.1, 2.2, 0.1, 1.0, 1.2, 65, "100g"),
        ("娃娃菜", "蔬菜", 12, 1.0, 2.0, 0.1, 1.0, 1.0, 50, "100g"),
        ("卷心菜", "蔬菜", 25, 1.3, 5.8, 0.1, 2.5, 3.2, 18, "100g"),
        ("紫甘蓝", "蔬菜", 28, 1.5, 6.0, 0.2, 2.0, 3.5, 20, "100g"),
        ("芹菜", "蔬菜", 16, 0.7, 3.0, 0.2, 1.6, 1.3, 80, "100g"),
        ("青椒", "蔬菜", 20, 0.9, 4.6, 0.2, 1.7, 2.4, 3, "100g"),
        ("红椒", "蔬菜", 31, 1.0, 6.0, 0.3, 2.1, 4.2, 4, "100g"),
        ("茄子", "蔬菜", 25, 1.0, 5.9, 0.1, 3.0, 3.5, 2, "100g"),
        ("南瓜", "蔬菜", 26, 1.0, 6.5, 0.1, 0.5, 2.8, 1, "100g"),
        ("冬瓜", "蔬菜", 12, 0.4, 2.6, 0.1, 0.7, 1.2, 1, "100g"),
        ("苦瓜", "蔬菜", 19, 1.0, 3.7, 0.1, 2.8, 1.9, 2, "100g"),
        ("丝瓜", "蔬菜", 20, 1.0, 4.2, 0.2, 0.6, 2.1, 2, "100g"),
        ("豆角", "蔬菜", 31, 2.5, 5.7, 0.2, 2.1, 2.0, 4, "100g"),
        ("四季豆", "蔬菜", 28, 2.0, 5.3, 0.2, 2.4, 2.5, 6, "100g"),
        ("荷兰豆", "蔬菜", 42, 2.8, 7.5, 0.2, 2.6, 4.0, 4, "100g"),
        ("蘑菇", "蔬菜", 22, 3.1, 3.3, 0.3, 1.0, 1.7, 5, "100g"),
        ("香菇", "蔬菜", 34, 2.2, 6.8, 0.3, 2.5, 2.4, 9, "100g"),
        ("金针菇", "蔬菜", 32, 2.4, 6.0, 0.3, 2.7, 1.7, 3, "100g"),
        ("杏鲍菇", "蔬菜", 35, 1.3, 8.1, 0.1, 1.8, 2.0, 18, "100g"),
        ("木耳", "蔬菜", 21, 1.5, 5.8, 0.2, 5.0, 0.0, 48, "100g"),
        ("莲藕", "蔬菜", 70, 2.6, 16.4, 0.1, 1.3, 0.0, 44, "100g"),
        ("竹笋", "蔬菜", 19, 2.6, 3.0, 0.2, 2.0, 2.5, 4, "100g"),
        ("韭菜", "蔬菜", 26, 2.4, 4.6, 0.4, 1.4, 1.6, 10, "100g"),
        ("葱", "蔬菜", 30, 1.8, 6.5, 0.3, 2.6, 2.3, 17, "100g"),
        ("姜", "蔬菜", 41, 1.3, 7.7, 0.7, 2.0, 1.7, 13, "100g"),
        ("大蒜", "蔬菜", 132, 6.4, 27.9, 0.2, 1.5, 1.0, 17, "100g"),
        ("洋葱", "蔬菜", 40, 1.1, 9.3, 0.1, 1.7, 4.2, 4, "100g"),
        ("玉米笋", "蔬菜", 29, 3.0, 4.7, 0.4, 2.5, 2.0, 3, "100g"),
        ("秋葵", "蔬菜", 33, 2.0, 7.0, 0.1, 3.2, 1.5, 7, "100g"),

        # ==================== 水果类 (30项) ====================
        ("苹果", "水果", 52, 0.3, 14.0, 0.2, 2.4, 10.4, 1, "100g"),
        ("香蕉", "水果", 89, 1.1, 23.0, 0.3, 2.6, 12.2, 1, "100g"),
        ("橙子", "水果", 47, 0.9, 12.0, 0.1, 2.4, 9.4, 0, "100g"),
        ("草莓", "水果", 32, 0.7, 7.7, 0.3, 2.0, 4.9, 1, "100g"),
        ("葡萄", "水果", 69, 0.7, 18.0, 0.2, 0.9, 15.5, 1, "100g"),
        ("西瓜", "水果", 30, 0.6, 7.6, 0.2, 0.4, 6.2, 1, "100g"),
        ("哈密瓜", "水果", 34, 0.8, 8.2, 0.1, 0.9, 7.9, 18, "100g"),
        ("蜜瓜", "水果", 36, 0.5, 9.1, 0.1, 0.8, 8.1, 16, "100g"),
        ("桃子", "水果", 39, 0.9, 10.0, 0.3, 1.5, 8.4, 0, "100g"),
        ("梨", "水果", 57, 0.4, 15.0, 0.1, 3.1, 9.8, 1, "100g"),
        ("李子", "水果", 46, 0.7, 11.4, 0.3, 1.4, 9.9, 0, "100g"),
        ("杏", "水果", 48, 1.4, 11.1, 0.4, 2.0, 9.2, 1, "100g"),
        ("樱桃", "水果", 63, 1.1, 16.0, 0.2, 2.1, 12.8, 0, "100g"),
        ("芒果", "水果", 60, 0.8, 15.0, 0.4, 1.6, 13.7, 1, "100g"),
        ("菠萝", "水果", 50, 0.5, 13.1, 0.1, 1.4, 9.9, 1, "100g"),
        ("木瓜", "水果", 43, 0.5, 11.0, 0.3, 1.7, 7.8, 8, "100g"),
        ("火龙果", "水果", 51, 1.1, 11.8, 0.4, 1.9, 8.0, 39, "100g"),
        ("猕猴桃", "水果", 61, 1.1, 14.7, 0.5, 3.0, 9.0, 3, "100g"),
        ("柚子", "水果", 38, 0.8, 9.6, 0.1, 1.0, 7.0, 0, "100g"),
        ("柠檬", "水果", 29, 1.1, 9.3, 0.3, 2.8, 2.5, 2, "100g"),
        ("百香果", "水果", 97, 2.2, 23.4, 0.7, 10.4, 11.2, 28, "100g"),
        ("石榴", "水果", 83, 1.7, 18.7, 1.2, 4.0, 13.7, 3, "100g"),
        ("荔枝", "水果", 66, 0.8, 16.5, 0.4, 1.3, 15.2, 1, "100g"),
        ("龙眼", "水果", 60, 1.0, 15.0, 0.1, 1.1, 15.0, 3, "100g"),
        ("榴莲", "水果", 147, 1.5, 27.1, 5.3, 3.8, 13.0, 2, "100g"),
        ("山竹", "水果", 72, 0.4, 18.0, 0.6, 1.8, 0.0, 7, "100g"),
        ("椰子肉", "水果", 354, 3.3, 15.2, 33.5, 9.0, 6.2, 20, "100g"),
        ("蓝莓", "水果", 57, 0.7, 14.5, 0.3, 2.4, 10.0, 1, "100g"),
        ("覆盆子", "水果", 52, 1.2, 12.0, 0.7, 6.5, 4.4, 1, "100g"),
        ("无花果", "水果", 74, 0.8, 19.2, 0.3, 2.9, 16.3, 1, "100g"),

        # ==================== 奶制品 (12项) ====================
        ("牛奶", "奶制品", 42, 3.4, 5.0, 1.0, 0.0, 5.0, 44, "100ml"),
        ("脱脂牛奶", "奶制品", 34, 3.4, 5.0, 0.1, 0.0, 5.0, 52, "100ml"),
        ("酸奶", "奶制品", 59, 10.0, 3.6, 0.4, 0.0, 3.2, 36, "100g"),
        ("希腊酸奶", "奶制品", 97, 9.0, 3.6, 5.0, 0.0, 3.5, 46, "100g"),
        ("奶酪", "奶制品", 402, 25.0, 1.3, 33.0, 0.0, 0.5, 621, "100g"),
        ("切达奶酪", "奶制品", 403, 24.9, 1.3, 33.1, 0.0, 0.5, 621, "100g"),
        ("马苏里拉", "奶制品", 280, 22.2, 2.2, 22.4, 0.0, 1.0, 486, "100g"),
        ("奶油", "奶制品", 717, 0.9, 2.8, 78.3, 0.0, 2.9, 26, "100g"),
        ("黄油", "奶制品", 717, 0.9, 0.1, 81.1, 0.0, 0.1, 576, "100g"),
        ("炼乳", "奶制品", 321, 7.9, 54.4, 8.7, 0.0, 54.4, 128, "100g"),
        ("奶粉", "奶制品", 496, 26.2, 38.4, 26.7, 0.0, 38.4, 371, "100g"),
        ("羊奶", "奶制品", 69, 3.6, 4.5, 4.1, 0.0, 4.5, 50, "100ml"),

        # ==================== 坚果类 (15项) ====================
        ("核桃", "坚果", 654, 15.2, 13.7, 65.2, 6.7, 2.6, 2, "100g"),
        ("杏仁", "坚果", 579, 21.2, 21.6, 49.9, 12.5, 4.4, 1, "100g"),
        ("花生", "坚果", 567, 25.8, 16.1, 49.2, 8.5, 4.0, 18, "100g"),
        ("腰果", "坚果", 553, 18.2, 30.2, 43.9, 3.3, 5.9, 12, "100g"),
        ("开心果", "坚果", 560, 20.2, 27.2, 45.3, 10.6, 7.7, 1, "100g"),
        ("夏威夷果", "坚果", 718, 7.9, 13.8, 75.8, 8.6, 4.6, 5, "100g"),
        ("榛子", "坚果", 628, 15.0, 16.7, 60.8, 9.7, 4.3, 0, "100g"),
        ("松子", "坚果", 673, 13.7, 13.1, 68.4, 3.7, 3.6, 2, "100g"),
        ("瓜子", "坚果", 570, 23.1, 16.4, 49.9, 4.3, 2.6, 9, "100g"),
        ("南瓜子", "坚果", 559, 30.2, 10.7, 49.1, 6.0, 1.4, 7, "100g"),
        ("西瓜子", "坚果", 556, 31.2, 15.3, 45.9, 4.1, 0.0, 72, "100g"),
        ("葵花籽", "坚果", 584, 20.8, 20.0, 51.5, 8.6, 2.6, 9, "100g"),
        ("栗子", "坚果", 185, 3.2, 40.5, 1.5, 5.0, 0.0, 2, "100g"),
        ("莲子", "坚果", 344, 17.2, 64.5, 2.0, 3.0, 0.0, 5, "100g"),
        ("白果", "坚果", 188, 4.3, 36.2, 1.6, 1.6, 0.0, 7, "100g"),

        # ==================== 饮品类 (15项) ====================
        ("绿茶", "饮品", 1, 0.0, 0.0, 0.0, 0.0, 0.0, 1, "100ml"),
        ("红茶", "饮品", 1, 0.0, 0.0, 0.0, 0.0, 0.0, 3, "100ml"),
        ("咖啡(黑)", "饮品", 2, 0.1, 0.0, 0.0, 0.0, 0.0, 2, "100ml"),
        ("美式咖啡", "饮品", 5, 0.3, 0.0, 0.0, 0.0, 0.0, 5, "100ml"),
        ("拿铁咖啡", "饮品", 56, 3.0, 5.5, 2.4, 0.0, 5.0, 50, "100ml"),
        ("橙汁", "饮品", 45, 0.7, 10.4, 0.2, 0.2, 8.4, 1, "100ml"),
        ("苹果汁", "饮品", 46, 0.1, 11.3, 0.1, 0.2, 9.6, 4, "100ml"),
        ("椰子水", "饮品", 19, 0.7, 3.7, 0.2, 1.1, 2.6, 105, "100ml"),
        ("豆奶", "饮品", 54, 3.3, 6.3, 1.8, 0.6, 4.0, 50, "100ml"),
        ("杏仁奶", "饮品", 17, 0.6, 1.5, 1.1, 0.3, 0.0, 72, "100ml"),
        ("燕麦奶", "饮品", 47, 1.0, 8.2, 1.5, 0.8, 4.0, 42, "100ml"),
        ("可乐", "饮品", 42, 0.0, 10.6, 0.0, 0.0, 10.6, 4, "100ml"),
        ("雪碧", "饮品", 40, 0.0, 10.0, 0.0, 0.0, 10.0, 14, "100ml"),
        ("运动饮料", "饮品", 26, 0.0, 6.5, 0.0, 0.0, 5.8, 55, "100ml"),
        ("蜂蜜水", "饮品", 30, 0.0, 8.0, 0.0, 0.0, 8.0, 1, "100ml"),

        # ==================== 零食甜点类 (15项) ====================
        ("巧克力", "零食", 546, 5.0, 60.0, 31.0, 7.0, 48.0, 24, "100g"),
        ("黑巧克力", "零食", 598, 7.8, 45.9, 42.6, 10.9, 24.0, 20, "100g"),
        ("饼干", "零食", 502, 6.5, 61.6, 25.6, 2.4, 20.0, 528, "100g"),
        ("蛋糕", "零食", 348, 5.0, 52.0, 13.0, 1.0, 30.0, 280, "100g"),
        ("面包圈", "零食", 269, 10.5, 52.7, 1.3, 2.3, 3.5, 480, "100g"),
        ("薯片", "零食", 536, 7.0, 52.9, 34.6, 4.8, 0.3, 525, "100g"),
        ("爆米花", "零食", 387, 13.0, 78.0, 4.5, 15.0, 0.0, 8, "100g"),
        ("蜜饯", "零食", 320, 0.5, 80.0, 0.0, 2.0, 65.0, 200, "100g"),
        ("月饼", "零食", 421, 8.0, 50.0, 21.0, 2.0, 28.0, 250, "100g"),
        ("冰淇淋", "零食", 207, 3.5, 24.0, 11.0, 0.7, 21.0, 80, "100g"),
        ("果冻", "零食", 70, 0.0, 17.5, 0.0, 0.0, 15.0, 30, "100g"),
        ("布丁", "零食", 121, 3.2, 20.5, 2.8, 0.0, 16.0, 75, "100g"),
        ("奶茶", "零食", 52, 0.8, 9.0, 1.5, 0.0, 7.5, 25, "100ml"),
        ("珍珠奶茶", "零食", 85, 0.6, 18.0, 1.5, 0.0, 15.0, 30, "100ml"),
        ("红豆沙", "零食", 240, 5.0, 52.0, 1.0, 6.0, 30.0, 15, "100g"),

        # ==================== 调味料类 (10项) ====================
        ("酱油", "调味料", 53, 5.6, 5.6, 0.1, 0.0, 0.4, 5637, "100ml"),
        ("醋", "调味料", 21, 0.4, 4.9, 0.0, 0.0, 0.4, 750, "100ml"),
        ("食用油", "调味料", 884, 0.0, 0.0, 100.0, 0.0, 0.0, 0, "100ml"),
        ("橄榄油", "调味料", 884, 0.0, 0.0, 100.0, 0.0, 0.0, 2, "100ml"),
        ("芝麻油", "调味料", 884, 0.0, 0.0, 100.0, 0.0, 0.0, 0, "100ml"),
        ("蚝油", "调味料", 120, 3.5, 20.0, 0.3, 0.0, 15.0, 4800, "100ml"),
        ("番茄酱", "调味料", 100, 1.7, 23.0, 0.1, 0.8, 21.0, 907, "100g"),
        ("沙拉酱", "调味料", 680, 1.0, 5.0, 72.0, 0.0, 4.0, 800, "100g"),
        ("蜂蜜", "调味料", 304, 0.3, 82.4, 0.0, 0.2, 82.1, 4, "100g"),
        ("白糖", "调味料", 400, 0.0, 99.9, 0.0, 0.0, 99.9, 1, "100g"),
    ]

    # 使用 INSERT OR IGNORE 避免重复
    cursor.executemany('''
        INSERT OR IGNORE INTO food
        (name, category, calories_per_unit, protein, carbs, fat, fiber, sugar, sodium, unit)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', foods)

    print(f"[数据] 共{len(foods)}种食物数据")

    # 先清空运动表，避免重复
    print("[数据] 清空旧运动数据...")
    cursor.execute('DELETE FROM exercise')

    # 插入运动数据 - 完整运动库（150+项目）
    print("[数据] 插入完整运动数据库...")
    exercises = [
        # ==================== 有氧运动 (38项) ====================
        ("跑步", "有氧运动", "最经典的有氧运动，提高心肺功能和耐力", "中等", 10, "腿部,臀部,核心", "跑鞋", "", ""),
        ("慢跑", "有氧运动", "低强度持续有氧，适合初学者和恢复训练", "低", 8, "腿部,臀部", "跑鞋", "", ""),
        ("冲刺跑", "有氧运动", "高强度短距离冲刺，提升爆发力和代谢", "高", 15, "腿部,臀部,核心", "跑鞋", "", ""),
        ("游泳", "有氧运动", "全身性低冲击运动，对关节友好", "中等", 11, "全身肌肉", "泳池,泳具", "", ""),
        ("自由泳", "有氧运动", "游泳中效率最高的泳姿", "中等", 12, "肩部,背部,核心,腿部", "泳池,泳具", "", ""),
        ("蛙泳", "有氧运动", "适合初学者的基础泳姿", "低", 9, "胸部,腿部,臀部", "泳池,泳具", "", ""),
        ("蝶泳", "有氧运动", "高难度高消耗泳姿", "高", 14, "肩部,胸部,核心,腿部", "泳池,泳具", "", ""),
        ("骑行", "有氧运动", "户外或室内单车运动", "中等", 8, "腿部,臀部", "自行车", "", ""),
        ("动感单车", "有氧运动", "室内高强度骑行训练", "高", 12, "腿部,臀部,核心", "动感单车", "", ""),
        ("跳绳", "有氧运动", "高效燃脂全身运动", "高", 12, "全身肌肉,小腿", "跳绳", "", ""),
        ("双摇跳绳", "有氧运动", "高难度跳绳，极致燃脂", "高", 16, "全身肌肉,小腿,手臂", "跳绳", "", ""),
        ("快走", "有氧运动", "适合初学者的低强度有氧", "低", 4, "腿部,臀部", "舒适鞋子", "", ""),
        ("健步走", "有氧运动", "带有手臂摆动的快速步行", "低", 5, "腿部,臀部,手臂", "舒适鞋子", "", ""),
        ("爬楼梯", "有氧运动", "利用楼梯进行有氧训练", "中等", 9, "腿部,臀部,核心", "无", "", ""),
        ("登山", "有氧运动", "户外有氧耐力运动", "中等", 8, "腿部,臀部,核心", "登山鞋,登山杖", "", ""),
        ("徒步", "有氧运动", "长距离户外步行运动", "低", 5, "腿部,臀部", "徒步鞋", "", ""),
        ("划船机", "有氧运动", "全身有氧力量结合训练", "中等", 10, "背部,手臂,腿部,核心", "划船机", "", ""),
        ("椭圆机", "有氧运动", "低冲击全身有氧运动", "中等", 8, "腿部,臀部,手臂", "椭圆机", "", ""),
        ("踏步机", "有氧运动", "模拟爬楼梯的有氧训练", "中等", 9, "腿部,臀部", "踏步机", "", ""),
        ("跑步机", "有氧运动", "室内跑步训练", "中等", 10, "腿部,臀部,核心", "跑步机", "", ""),
        ("有氧操", "有氧运动", "跟随音乐的有氧舞蹈", "中等", 8, "全身肌肉", "无", "", ""),
        ("尊巴舞", "有氧运动", "拉丁风格有氧舞蹈", "中等", 9, "全身肌肉,核心", "无", "", ""),
        ("搏击操", "有氧运动", "结合拳击动作的有氧训练", "高", 11, "全身肌肉,核心", "无", "", ""),
        ("跆拳道操", "有氧运动", "结合跆拳道动作的有氧训练", "中等", 10, "腿部,核心,全身", "无", "", ""),
        ("滑冰", "有氧运动", "冰上有氧运动", "中等", 8, "腿部,臀部,核心", "冰刀,冰场", "", ""),
        ("轮滑", "有氧运动", "户外轮滑运动", "中等", 7, "腿部,臀部,核心", "轮滑鞋,护具", "", ""),
        ("滑雪", "有氧运动", "冬季户外运动", "高", 10, "腿部,核心,全身", "滑雪装备", "", ""),
        ("篮球", "有氧运动", "团体对抗性运动", "高", 9, "全身肌肉", "篮球,球场", "", ""),
        ("足球", "有氧运动", "跑动量大的团体运动", "高", 10, "腿部,核心,全身", "足球,球场", "", ""),
        ("羽毛球", "有氧运动", "快速反应的球拍运动", "中等", 7, "手臂,腿部,核心", "羽毛球拍,羽毛球", "", ""),
        ("网球", "有氧运动", "全身协调性运动", "中等", 8, "手臂,腿部,核心", "网球拍,网球", "", ""),
        ("乒乓球", "有氧运动", "反应速度训练运动", "低", 5, "手臂,核心", "乒乓球拍,乒乓球", "", ""),
        ("排球", "有氧运动", "团体跳跃运动", "中等", 6, "手臂,腿部,核心", "排球", "", ""),
        ("壁球", "有氧运动", "高强度室内球拍运动", "高", 12, "全身肌肉", "壁球拍,壁球", "", ""),
        ("拳击有氧", "有氧运动", "拳击动作结合有氧", "高", 11, "手臂,肩部,核心", "拳击手套,沙袋", "", ""),
        ("跳舞", "有氧运动", "各类舞蹈有氧运动", "中等", 7, "全身肌肉", "无", "", ""),
        ("广场舞", "有氧运动", "适合中老年的舞蹈运动", "低", 4, "全身肌肉", "无", "", ""),
        ("跳床", "有氧运动", "蹦床有氧训练", "中等", 8, "腿部,核心", "蹦床", "", ""),

        # ==================== 力量训练 - 胸部 (15项) ====================
        ("俯卧撑", "力量训练", "经典徒手胸部训练动作", "中等", 7, "胸部,肩部,三头肌", "瑜伽垫", "", ""),
        ("宽距俯卧撑", "力量训练", "重点刺激胸大肌外侧", "中等", 7, "胸部,肩部", "瑜伽垫", "", ""),
        ("窄距俯卧撑", "力量训练", "重点刺激三头肌和胸中缝", "中等", 7, "胸部,三头肌", "瑜伽垫", "", ""),
        ("钻石俯卧撑", "力量训练", "高难度三头肌训练", "高", 8, "三头肌,胸部", "瑜伽垫", "", ""),
        ("击掌俯卧撑", "力量训练", "爆发力俯卧撑变式", "高", 9, "胸部,肩部,三头肌", "瑜伽垫", "", ""),
        ("上斜俯卧撑", "力量训练", "降低难度的俯卧撑变式", "低", 5, "胸部,肩部,三头肌", "凳子或台阶", "", ""),
        ("下斜俯卧撑", "力量训练", "增加难度针对上胸", "高", 8, "上胸,肩部,三头肌", "凳子或台阶", "", ""),
        ("杠铃卧推", "力量训练", "经典胸部力量训练", "中等", 6, "胸部,肩部,三头肌", "杠铃,卧推凳", "", ""),
        ("哑铃卧推", "力量训练", "单侧独立的胸部训练", "中等", 6, "胸部,肩部,三头肌", "哑铃,卧推凳", "", ""),
        ("上斜杠铃卧推", "力量训练", "针对上胸的卧推变式", "中等", 6, "上胸,肩部,三头肌", "杠铃,可调节卧推凳", "", ""),
        ("上斜哑铃卧推", "力量训练", "哑铃上斜卧推", "中等", 6, "上胸,肩部,三头肌", "哑铃,可调节卧推凳", "", ""),
        ("哑铃飞鸟", "力量训练", "胸大肌拉伸训练", "中等", 5, "胸部", "哑铃,卧推凳", "", ""),
        ("龙门架夹胸", "力量训练", "胸肌中缝训练", "中等", 5, "胸部内侧", "龙门架", "", ""),
        ("双杠臂屈伸", "力量训练", "胸部和三头肌复合训练", "高", 8, "胸部,三头肌,肩部", "双杠", "", ""),
        ("器械推胸", "力量训练", "固定轨迹胸部训练", "低", 5, "胸部,肩部,三头肌", "推胸机", "", ""),

        # ==================== 力量训练 - 背部 (15项) ====================
        ("引体向上", "力量训练", "经典背部力量训练", "高", 10, "背阔肌,二头肌,前臂", "单杠", "", ""),
        ("宽握引体向上", "力量训练", "重点刺激背阔肌宽度", "高", 10, "背阔肌,大圆肌", "单杠", "", ""),
        ("窄握引体向上", "力量训练", "二头肌参与更多", "高", 10, "背阔肌,二头肌", "单杠", "", ""),
        ("反握引体向上", "力量训练", "二头肌和下背参与更多", "高", 10, "背阔肌,二头肌", "单杠", "", ""),
        ("澳式引体", "力量训练", "降低难度的引体向上替代", "中等", 6, "背阔肌,二头肌", "低杠或TRX", "", ""),
        ("杠铃划船", "力量训练", "背部厚度训练", "中等", 7, "背阔肌,斜方肌,二头肌", "杠铃", "", ""),
        ("哑铃划船", "力量训练", "单侧背部训练", "中等", 6, "背阔肌,斜方肌,二头肌", "哑铃,凳子", "", ""),
        ("坐姿划船", "力量训练", "器械背部训练", "中等", 6, "背阔肌,斜方肌", "划船机", "", ""),
        ("高位下拉", "力量训练", "引体向上的器械替代", "中等", 6, "背阔肌,二头肌", "高位下拉机", "", ""),
        ("直臂下拉", "力量训练", "背阔肌孤立训练", "中等", 5, "背阔肌", "龙门架", "", ""),
        ("面拉", "力量训练", "后束和斜方肌训练", "低", 4, "后束,斜方肌,菱形肌", "龙门架,绳索", "", ""),
        ("硬拉", "力量训练", "全身力量之王", "高", 9, "下背,臀部,腿部,核心", "杠铃", "", ""),
        ("罗马尼亚硬拉", "力量训练", "腘绳肌和臀部训练", "中等", 7, "腘绳肌,臀部,下背", "杠铃或哑铃", "", ""),
        ("山羊挺身", "力量训练", "下背强化训练", "中等", 5, "下背,臀部", "山羊挺身凳", "", ""),
        ("T杠划船", "力量训练", "背部厚度训练", "中等", 7, "背阔肌,斜方肌", "T杠", "", ""),

        # ==================== 力量训练 - 肩部 (10项) ====================
        ("站姿推举", "力量训练", "经典肩部力量训练", "中等", 6, "肩部,三头肌,核心", "杠铃", "", ""),
        ("坐姿哑铃推举", "力量训练", "稳定的肩部训练", "中等", 6, "肩部,三头肌", "哑铃,凳子", "", ""),
        ("阿诺德推举", "力量训练", "全面刺激三角肌", "中等", 6, "肩部全面", "哑铃", "", ""),
        ("侧平举", "力量训练", "三角肌中束训练", "低", 4, "三角肌中束", "哑铃", "", ""),
        ("前平举", "力量训练", "三角肌前束训练", "低", 4, "三角肌前束", "哑铃或杠铃片", "", ""),
        ("俯身飞鸟", "力量训练", "三角肌后束训练", "低", 4, "三角肌后束", "哑铃", "", ""),
        ("绳索侧平举", "力量训练", "持续张力侧平举", "低", 4, "三角肌中束", "龙门架", "", ""),
        ("耸肩", "力量训练", "斜方肌上部训练", "中等", 5, "斜方肌", "杠铃或哑铃", "", ""),
        ("直立划船", "力量训练", "肩部和斜方肌复合训练", "中等", 5, "肩部,斜方肌", "杠铃或哑铃", "", ""),
        ("器械推肩", "力量训练", "固定轨迹肩部训练", "低", 5, "肩部,三头肌", "推肩机", "", ""),

        # ==================== 力量训练 - 手臂 (12项) ====================
        ("杠铃弯举", "力量训练", "经典二头肌训练", "中等", 5, "二头肌", "杠铃", "", ""),
        ("哑铃弯举", "力量训练", "二头肌单侧训练", "中等", 5, "二头肌", "哑铃", "", ""),
        ("锤式弯举", "力量训练", "肱肌和前臂训练", "中等", 5, "二头肌,肱肌,前臂", "哑铃", "", ""),
        ("集中弯举", "力量训练", "二头肌峰值训练", "低", 4, "二头肌", "哑铃", "", ""),
        ("牧师凳弯举", "力量训练", "二头肌孤立训练", "中等", 5, "二头肌", "牧师凳,杠铃", "", ""),
        ("绳索弯举", "力量训练", "持续张力二头训练", "中等", 5, "二头肌", "龙门架", "", ""),
        ("窄距卧推", "力量训练", "三头肌复合训练", "中等", 6, "三头肌,胸部", "杠铃,卧推凳", "", ""),
        ("绳索下压", "力量训练", "三头肌孤立训练", "中等", 5, "三头肌", "龙门架,绳索", "", ""),
        ("头顶臂屈伸", "力量训练", "三头肌长头训练", "中等", 5, "三头肌", "哑铃或杠铃", "", ""),
        ("仰卧臂屈伸", "力量训练", "三头肌孤立训练", "中等", 5, "三头肌", "杠铃或哑铃,凳子", "", ""),
        ("凳上臂屈伸", "力量训练", "徒手三头肌训练", "中等", 6, "三头肌", "凳子", "", ""),
        ("腕弯举", "力量训练", "前臂训练", "低", 3, "前臂", "哑铃", "", ""),

        # ==================== 力量训练 - 腿部 (18项) ====================
        ("深蹲", "力量训练", "下肢力量训练之王", "中等", 8, "股四头肌,臀部,核心", "无或杠铃", "", ""),
        ("杠铃深蹲", "力量训练", "负重深蹲训练", "高", 9, "股四头肌,臀部,核心", "杠铃,深蹲架", "", ""),
        ("前蹲", "力量训练", "股四头肌重点刺激", "高", 9, "股四头肌,核心", "杠铃", "", ""),
        ("高脚杯深蹲", "力量训练", "适合初学者的负重深蹲", "中等", 7, "股四头肌,臀部", "哑铃或壶铃", "", ""),
        ("保加利亚分腿蹲", "力量训练", "单腿力量训练", "高", 8, "股四头肌,臀部", "凳子,哑铃可选", "", ""),
        ("箭步蹲", "力量训练", "前后腿交替训练", "中等", 7, "股四头肌,臀部,腘绳肌", "无或哑铃", "", ""),
        ("行走箭步蹲", "力量训练", "动态箭步蹲变式", "中等", 8, "股四头肌,臀部", "无或哑铃", "", ""),
        ("侧弓步", "力量训练", "内收肌和股四头肌训练", "中等", 6, "股四头肌,内收肌,臀部", "无或哑铃", "", ""),
        ("腿举", "力量训练", "器械腿部训练", "中等", 7, "股四头肌,臀部", "腿举机", "", ""),
        ("腿屈伸", "力量训练", "股四头肌孤立训练", "中等", 5, "股四头肌", "腿屈伸机", "", ""),
        ("腿弯举", "力量训练", "腘绳肌孤立训练", "中等", 5, "腘绳肌", "腿弯举机", "", ""),
        ("臀桥", "力量训练", "臀部激活和训练", "低", 5, "臀部,腘绳肌", "瑜伽垫", "", ""),
        ("单腿臀桥", "力量训练", "单侧臀部训练", "中等", 6, "臀部,腘绳肌", "瑜伽垫", "", ""),
        ("臀推", "力量训练", "臀部力量训练", "中等", 7, "臀部", "杠铃,凳子", "", ""),
        ("相扑深蹲", "力量训练", "内收肌和臀部训练", "中等", 7, "臀部,内收肌,股四头肌", "无或哑铃", "", ""),
        ("小腿提踵", "力量训练", "小腿肌肉训练", "低", 4, "小腿", "台阶或器械", "", ""),
        ("坐姿提踵", "力量训练", "比目鱼肌训练", "低", 4, "小腿", "提踵机", "", ""),
        ("单腿深蹲", "力量训练", "高难度单腿训练", "高", 9, "股四头肌,臀部,核心", "无", "", ""),

        # ==================== 力量训练 - 核心 (15项) ====================
        ("平板支撑", "力量训练", "核心稳定性训练", "中等", 5, "核心,肩部,背部", "瑜伽垫", "", ""),
        ("侧平板支撑", "力量训练", "侧腹核心训练", "中等", 5, "侧腹,核心", "瑜伽垫", "", ""),
        ("仰卧起坐", "力量训练", "腹部基础训练", "中等", 6, "腹直肌", "瑜伽垫", "", ""),
        ("卷腹", "力量训练", "腹直肌孤立训练", "低", 5, "腹直肌", "瑜伽垫", "", ""),
        ("反向卷腹", "力量训练", "下腹训练", "中等", 5, "下腹", "瑜伽垫", "", ""),
        ("自行车卷腹", "力量训练", "腹斜肌训练", "中等", 6, "腹斜肌,腹直肌", "瑜伽垫", "", ""),
        ("俄罗斯转体", "力量训练", "腹斜肌旋转训练", "中等", 6, "腹斜肌,核心", "瑜伽垫", "", ""),
        ("死虫", "力量训练", "核心稳定和协调训练", "低", 4, "核心,腹直肌", "瑜伽垫", "", ""),
        ("悬垂抬腿", "力量训练", "下腹高级训练", "高", 7, "下腹,髂腰肌", "单杠", "", ""),
        ("悬垂举腿", "力量训练", "核心高级训练", "高", 8, "腹直肌,髂腰肌", "单杠", "", ""),
        ("腹肌轮", "力量训练", "核心高级训练", "高", 8, "核心,肩部,背部", "腹肌轮", "", ""),
        ("V字起坐", "力量训练", "腹部综合训练", "中等", 6, "腹直肌,髂腰肌", "瑜伽垫", "", ""),
        ("抬腿", "力量训练", "下腹训练", "中等", 5, "下腹,髂腰肌", "瑜伽垫", "", ""),
        ("鸟狗式", "力量训练", "核心稳定和背部训练", "低", 4, "核心,下背,臀部", "瑜伽垫", "", ""),
        ("超人式", "力量训练", "下背和臀部训练", "低", 4, "下背,臀部", "瑜伽垫", "", ""),

        # ==================== HIIT高强度间歇 (16项) ====================
        ("波比跳", "HIIT", "全身高强度复合动作", "高", 14, "全身肌肉", "无", "", ""),
        ("登山者", "HIIT", "核心和有氧结合训练", "高", 12, "核心,腿部,肩部", "瑜伽垫", "", ""),
        ("开合跳", "HIIT", "经典热身和高强度动作", "中等", 9, "全身肌肉", "无", "", ""),
        ("高抬腿", "HIIT", "腿部和心肺训练", "高", 11, "腿部,核心,髂腰肌", "无", "", ""),
        ("跳箱", "HIIT", "爆发力训练", "高", 12, "腿部,臀部,核心", "跳箱", "", ""),
        ("深蹲跳", "HIIT", "腿部爆发力训练", "高", 11, "腿部,臀部", "无", "", ""),
        ("箭步跳", "HIIT", "交替跳跃训练", "高", 11, "腿部,臀部", "无", "", ""),
        ("战绳", "HIIT", "全身高强度训练", "高", 13, "肩部,手臂,核心,腿部", "战绳", "", ""),
        ("壶铃摇摆", "HIIT", "髋部爆发力训练", "高", 11, "臀部,腘绳肌,核心,肩部", "壶铃", "", ""),
        ("药球砸地", "HIIT", "上身爆发力训练", "高", 10, "肩部,核心,手臂", "药球", "", ""),
        ("滑雪跳", "HIIT", "侧向爆发力训练", "高", 10, "腿部,臀部,核心", "无", "", ""),
        ("踏板跳", "HIIT", "心肺和腿部训练", "高", 11, "腿部,臀部", "踏板或台阶", "", ""),
        ("蹲跳拍手", "HIIT", "深蹲跳变式", "高", 12, "腿部,臀部", "无", "", ""),
        ("俯卧撑跳", "HIIT", "上身爆发力训练", "高", 10, "胸部,肩部,三头肌", "瑜伽垫", "", ""),
        ("冲刺跑原地", "HIIT", "原地高强度跑步", "高", 13, "腿部,核心", "无", "", ""),
        ("tabata训练", "HIIT", "20秒训练10秒休息循环", "高", 14, "全身肌肉", "无", "", ""),

        # ==================== 拉伸放松 (12项) ====================
        ("瑜伽", "拉伸放松", "身心平衡练习", "低", 3, "全身肌肉", "瑜伽垫", "", ""),
        ("普拉提", "拉伸放松", "核心控制和柔韧性训练", "中等", 4, "核心,全身", "瑜伽垫", "", ""),
        ("太极", "拉伸放松", "传统养生运动", "低", 3, "全身肌肉", "宽松衣物", "", ""),
        ("静态拉伸", "拉伸放松", "运动后肌肉放松", "低", 2, "全身肌肉", "瑜伽垫", "", ""),
        ("动态拉伸", "拉伸放松", "运动前热身拉伸", "低", 3, "全身肌肉", "无", "", ""),
        ("泡沫轴放松", "拉伸放松", "肌筋膜放松", "低", 2, "全身肌肉", "泡沫轴", "", ""),
        ("冥想", "拉伸放松", "心理放松和专注力训练", "低", 1, "无", "无", "", ""),
        ("呼吸练习", "拉伸放松", "深呼吸放松训练", "低", 1, "核心,横膈膜", "无", "", ""),
        ("阴瑜伽", "拉伸放松", "深层结缔组织拉伸", "低", 2, "全身肌肉", "瑜伽垫", "", ""),
        ("流瑜伽", "拉伸放松", "动态瑜伽流", "中等", 4, "全身肌肉", "瑜伽垫", "", ""),
        ("热瑜伽", "拉伸放松", "高温环境瑜伽", "中等", 5, "全身肌肉", "瑜伽垫,高温房", "", ""),
        ("按摩放松", "拉伸放松", "肌肉放松恢复", "低", 1, "全身肌肉", "按摩器具", "", ""),

        # ==================== 功能性训练 (12项) ====================
        ("土耳其起身", "功能训练", "全身协调和稳定性训练", "高", 8, "全身肌肉,核心", "壶铃或哑铃", "", ""),
        ("农夫行走", "功能训练", "核心稳定和握力训练", "中等", 6, "核心,前臂,肩部,腿部", "哑铃或壶铃", "", ""),
        ("熊爬", "功能训练", "全身协调性训练", "中等", 7, "核心,肩部,腿部", "无", "", ""),
        ("螃蟹走", "功能训练", "三头肌和核心训练", "中等", 6, "三头肌,核心,臀部", "无", "", ""),
        ("壶铃抓举", "功能训练", "爆发力全身训练", "高", 10, "全身肌肉", "壶铃", "", ""),
        ("壶铃挺举", "功能训练", "上肢爆发力训练", "高", 9, "肩部,腿部,核心", "壶铃", "", ""),
        ("TRX划船", "功能训练", "悬挂训练背部动作", "中等", 6, "背部,二头肌,核心", "TRX", "", ""),
        ("TRX俯卧撑", "功能训练", "悬挂训练胸部动作", "中等", 7, "胸部,肩部,核心", "TRX", "", ""),
        ("风车", "功能训练", "核心旋转稳定训练", "中等", 5, "核心,肩部,臀部", "壶铃", "", ""),
        ("翻轮胎", "功能训练", "全身力量和爆发力训练", "高", 12, "全身肌肉", "大轮胎", "", ""),
        ("抛药球", "功能训练", "上身爆发力训练", "中等", 7, "肩部,核心,胸部", "药球", "", ""),
        ("雪橇推拉", "功能训练", "全身力量耐力训练", "高", 11, "腿部,核心,肩部", "雪橇", "", ""),
    ]

    print(f"[数据] 共{len(exercises)}个运动项目")

    cursor.executemany('''
        INSERT OR IGNORE INTO exercise
        (name, category, description, difficulty_level, calories_per_minute, muscle_groups, equipment_needed, tutorial_url, image_url)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', exercises)
    
    # 创建管理员账户（清理了测试数据）
    print("[数据] 创建管理员账户...")
    current_time = datetime.now().strftime('%Y-%m-%d %H:%M:%S')

    users = [
        ("admin", "admin@fitness.com", hash_password("admin123"), 30, "male", 175.0, 70.0, "保持健康", current_time, current_time),
    ]
    
    cursor.executemany('''
        INSERT OR IGNORE INTO user 
        (username, email, password_hash, age, gender, height, weight, fitness_goal, created_at, updated_at)
        VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
    ''', users)
    
    # 清理示例数据，不插入示例饮食和运动记录
    print("[数据] 跳过示例数据插入（已清理原始测试数据）")

    # 不插入AI健身方案的示例数据
    print("[数据] 跳过AI方案示例数据插入（将通过AI生成）")

    # 提交所有更改
    conn.commit()

    # 验证数据插入
    print("\n[验证] 数据验证:")
    cursor.execute("SELECT COUNT(*) FROM user")
    user_count = cursor.fetchone()[0]
    print(f"   用户数量: {user_count}")

    cursor.execute("SELECT COUNT(*) FROM food")
    food_count = cursor.fetchone()[0]
    print(f"   食物种类: {food_count}")

    cursor.execute("SELECT COUNT(*) FROM exercise")
    exercise_count = cursor.fetchone()[0]
    print(f"   运动项目: {exercise_count}")

    cursor.execute("SELECT COUNT(*) FROM diet_record")
    diet_count = cursor.fetchone()[0]
    print(f"   饮食记录: {diet_count}")

    cursor.execute("SELECT COUNT(*) FROM exercise_log")
    exercise_log_count = cursor.fetchone()[0]
    print(f"   运动记录: {exercise_log_count}")

    cursor.execute("SELECT COUNT(*) FROM ai_plan")
    ai_plan_count = cursor.fetchone()[0]
    print(f"   AI方案: {ai_plan_count}")

    # 关闭连接
    conn.close()

    print("\n[完成] 数据库初始化完成！")
    print("=" * 50)
    print("[账户] 默认管理员账户:")
    print("   用户名: admin")
    print("   密码: admin123")
    print("=" * 50)
    print("[说明] 原始测试数据已清理，数据库已优化")
    print("=" * 50)

if __name__ == "__main__":
    init_database()